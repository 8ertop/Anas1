module.exports.config = {
  name: "ูุณุงุนุฏุฉ",
  version: "1.0.0",
  hasPermssion: 0,
  credits: "ุฃูุบุณุช",
  description: "ุฏููู ูููุณุชุฎุฏููู ุงูุฌุฏุฏ",
  category: "ูุธุงู",
  usages: "/ูุณุงุนุฏุฉ",
  prefix: true,
  premium: false,
  cooldowns: 5
};

const mathSansBold = {
  A: "๐", B: "๐", C: "๐", D: "๐", E: "๐", F: "๐", G: "๐", H: "๐", I: "๐",
  J: "๐", K: "๐", L: "๐", M: "๐", N: "๐ก", O: "๐ข", P: "๐ฃ", Q: "๐ค", R: "๐ฅ",
  S: "๐ฆ", T: "๐ง", U: "๐จ", V: "๐ฉ", W: "๐ช", X: "๐ซ", Y: "๐ฌ", Z: "๐ญ",
  a: "๐ฎ", b: "๐ฏ", c: "๐ฐ", d: "๐ฑ", e: "๐ฒ", f: "๐ณ", g: "๐ด", h: "๐ต", i: "๐ถ",
  j: "๐ท", k: "๐ธ", l: "๐น", m: "๐บ", n: "๐ป", o: "๐ผ", p: "๐ฝ", q: "๐พ", r: "๐ฟ",
  s: "๐", t: "๐", u: "๐", v: "๐", w: "๐", x: "๐", y: "๐", z: "๐"
};

module.exports.handleEvent = function ({ api, event, getText }) {
  const { commands } = global.client;
  const { threadID, messageID, body } = event;

  if (!body || typeof body !== "string" || !body.includes("ุงูุฃูุงูุฑ")) return;

  const splitBody = body.slice(body.indexOf("ุงูุฃูุงูุฑ")).trim().split(/\s+/);
  if (splitBody.length < 2 || !commands.has(splitBody[1].toLowerCase())) return;

  const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};
  const command = commands.get(splitBody[1].toLowerCase());
  const prefix = threadSetting.hasOwnProperty("PREFIX") ? threadSetting.PREFIX : global.config.PREFIX;

  return api.sendMessage(
    getText(
      "moduleInfo",
      command.config.name,
      command.config.description,
      `${prefix}${command.config.name} ${command.config.usages || ""}`,
      command.config.category,
      command.config.cooldowns,
      command.config.hasPermission === 0
        ? getText("ูุณุชุฎุฏู")
        : command.config.hasPermission === 1
        ? getText("ูุฏูุฑ_ุงููุฌููุนุฉ")
        : getText("ูุฏูุฑ_ุงูุจูุช"),
      command.config.credits
    ),
    threadID,
    messageID
  );
};

module.exports.run = async function ({ api, event, args }) {
  const uid = event.senderID;
  const userName = (await api.getUserInfo(uid))[uid].name;

  const { commands } = global.client;
  const { threadID, messageID } = event;
  const threadSetting = global.data.threadData.get(parseInt(threadID)) || {};
  const prefix = threadSetting.hasOwnProperty("PREFIX") ? threadSetting.PREFIX : global.config.PREFIX;

  const categories = new Set();
  const categorizedCommands = new Map();

  for (const [name, value] of commands) {
    const categoryName = value.config.category;
    if (!categories.has(categoryName)) {
      categories.add(categoryName);
      categorizedCommands.set(categoryName, []);
    }
    categorizedCommands.get(categoryName).push(`โ โง ${value.config.name}`);
  }

  let msg = `ูุฑุญุจุงู ${userName}ุ ูุฐู ุงูุฃูุงูุฑ ูุฏ ุชุณุงุนุฏู ูู ูุงุฌุจุงุชู ูููุงูุงุชู:\n`;

  for (const categoryName of categories) {
    const categoryNameSansBold = categoryName.split("").map(c => mathSansBold[c] || c).join("");
    msg += `โญโโใ ${categoryNameSansBold} ใ\n`;
    msg += categorizedCommands.get(categoryName).join("\n");
    msg += "\nโฐโโโโโโโโโโโโก\n";
  }

  const randomQuotes = [
    "ุชูุชูู ุงูุฃุฎุทุจูุท ุซูุงุซุฉ ูููุจ: ุงุซูุงู ูุถุฎุงู ุงูุฏู ุฅูู ุงูุฎูุงุดููุ ูุงูุซุงูุซ ูุถุฎู ุฅูู ุจุงูู ุงูุฌุณู.",
    "ุงูุนุณู ูุง ููุณุฏ ุฃุจุฏุงูุ ููุฏ ุนุซุฑ ุนููุงุก ุงูุขุซุงุฑ ุนูู ุฃูุงูู ุนุณู ูู ููุงุจุฑ ูุตุฑูุฉ ูุฏููุฉ ูุฒูุฏ ุนูุฑูุง ุนู 3000 ุณูุฉ.",
    "ุฃูุฏู ูุตูุฉ ูุนุฑููุฉ ูู ุงูุนุงูู ูู ูุตูุฉ ูุตูุน ุงูุจูุฑุฉ.",
    "ุงูููุฒ ููุนุชุจุฑ ูู ุงูุซูุงุฑ (berry)ุ ุจูููุง ุงููุฑุงููุฉ ููุณุช ูุฐูู.",
    "ููุฃุจูุงุฑ ุฃุตุฏูุงุก ููุฑุจูู ูุชุชูุชุฑ ุนูุฏ ูุตููุง ุนููู.",
    "ุฃูุตุฑ ุญุฑุจ ูู ุงูุชุงุฑูุฎ ูุงูุช ุจูู ุจุฑูุทุงููุง ูุฒูุฌุจุงุฑ ูู 27 ุฃุบุณุทุณ 1896ุ ุงุณุชุณููุช ุฒูุฌุจุงุฑ ุจุนุฏ 38 ุฏูููุฉ ููุท.",
    "ููุดู ุงูุดุฎุต ุงูุนุงุฏู ูู ุญูุงุชู ูุณุงูุฉ ุชุนุงุฏู ุซูุงุซ ูุฑุงุช ุญูู ุงูุนุงูู.",
    "ุงูุฏุจุจุฉ ุงููุทุจูุฉ ุชุณุชุฎุฏู ูุฏูุง ุงููุณุฑู ุจุดูู ุฃุณุงุณู.",
    "ุงูุญููุงู ุงููุทูู ูุงุณูุชููุฏุง ูู ูุญูุฏ ุงููุฑู.",
    "ููุทูู ุนูู ูุฌููุนุฉ ูู ุทููุฑ ุงูููุงููุบู ุงุณู 'flamboyance' (ุชุฃูู).",
    "ุนุฏุฏ ุงูุชุณูุณูุงุช ุงูููููุฉ ูู ูุนุจุฉ ุงูุดุทุฑูุฌ ุฃูุจุฑ ูู ุนุฏุฏ ุงูุฐุฑุงุช ูู ุงูููู ุงููุฑุตูุฏ.",
    "ุฑุงุฆุญุฉ ุงูุนุดุจ ุงูููุทูุน ุญุฏูุซุงู ูู ูู ุงูุญูููุฉ ุฅุดุงุฑุฉ ุงุณุชุบุงุซุฉ ูู ุงููุจุงุช.",
    "ููู ูุงุญุฏ ุนูู ูููุจ ุงูุฒูุฑุฉ ุฃุทูู ูู ุณูุชู.",
    "ุชุณุชุทูุน ูุญูุงุช ุงูุนุณู ุงูุชุนุฑู ุนูู ูุฌูู ุงูุจุดุฑ.",
    "ุจุฑุงุฒ ุงูููุจุช ุนูู ุดูู ููุนุจุงุช.",
    "ุงูุจุฑุชูุงู ูู ููู ุจุฑุชูุงูู ุงูููู ูู ุงูุฃุตู.",
    "ุฃุทูู ูุชุฑุฉ ุจูู ููุงุฏุฉ ุชูุฃููู ูู 87 ูููุงู.",
    "ุตุงุนูุฉ ุงูุจุฑู ุฃุณุฎู ูู ุณุทุญ ุงูุดูุณ ุจุณุช ูุฑุงุช.",
    "ููุทูู ุนูู ุตุบูุฑ ุงูุจูู ุงุณู puffling.",
    "ูููุฉ 'jiffy' ูู ูุญุฏุฉ ุฒูููุฉ ุญููููุฉ: ุชุนุงุฏู 1/100 ูู ุงูุซุงููุฉ.",
    "ูููุฉ 'nerd' ุธูุฑุช ุฃูู ูุฑุฉ ูู ูุชุงุจ ุงูุฏูุชูุฑ ุณูุณ 'If I Ran the Zoo'.",
    "ููุงู ููุน ูู ููุงุฏูู ุงูุจุญุฑ ููุนุชุจุฑ ุฎุงูุฏ ุจููููุฌูุงู.",
    "ุจุฑุฌ ุฅููู ูุตุจุญ ุฃุทูู ุจุญูุงูู 15 ุณู ูู ุงูุตูู ุจุณุจุจ ุชูุฏุฏ ุงูุญุฏูุฏ.",
    "ุงูุฃุฑุถ ููุณุช ูุฑุฉ ูุซุงููุฉุ ุฅููุง ูููุทุญุฉ ููููุงู ุนูุฏ ุงููุทุจูู ูููุชูุฎุฉ ุนูุฏ ุฎุท ุงูุงุณุชูุงุก.",
    "ุทุงุฆุฑ ุงูุทูุงู ุฃุฎู ูุฒูุงู ูู ุจูุณ ูุงุญุฏ.",
    "ุจุตูุงุช ุงูููุงูุง ุดุจู ูุทุงุจูุฉ ูุจุตูุงุช ุงูุฅูุณุงู.",
    "ุชูุฌุฏ ุจูุฏุฉ ูู ุงููุฑููุฌ ูุง ุชุดุฑู ูููุง ุงูุดูุณ ูุฃุณุงุจูุน ูู ุงูุดุชุงุก ููุง ุชุบุฑุจ ูุฃุณุงุจูุน ูู ุงูุตูู.",
    "ููุทูู ุนูู ูุฌููุนุฉ ูู ุงูุจูู ุงุณู 'ุจุฑููุงู'.",
    "ุจุตูุงุช ุงูููุงูุง ุฃุญูุงูุงู ุชูุฎูุท ูุน ุจุตูุงุช ุงูุฅูุณุงู ูู ูุณุฑุญ ุงูุฌุฑููุฉ.",
    "ุงูุฃุจุฌุฏูุฉ ุงููุงูุงููุฉ ุชุญุชูู ุนูู 13 ุญุฑูุงู ููุท.",
    "ููุถู ุงูุดุฎุต ุงูุนุงุฏู ุญูุงูู ุณุชุฉ ุฃุดูุฑ ูู ุญูุงุชู ูู ุงูุชุธุงุฑ ุชุญูู ุงูุฅุดุงุฑุฉ ุงููุฑูุฑูุฉ ุฅูู ุงูููู ุงูุฃุฎุถุฑ.",
    "ุตุบูุฑ ุงูููุบุฑ ุนูุฏ ุงูููุงุฏุฉ ุทููู ุญูุงูู 2.5 ุณู ููุท.",
    "ุฃูุฏู ุดุฌุฑุฉ ุญูุฉ ูุนุฑููุฉ ูุฒูุฏ ุนูุฑูุง ุนู 5000 ุณูุฉ.",
    "ูุดุฑูุจ ูููุงูููุง ูุงู ุณูููู ุฃุฎุถุฑ ุงูููู ูููุง ุฅุถุงูุฉ ุงูุฃููุงู.",
    "ููู ูุงุญุฏ ุนูู ูููุจ ุงููุฑูุฎ ูุณุชูุฑ ุญูุงูู 24.6 ุณุงุนุฉ.",
    "ุณูุฑ ุงูุตูู ุงูุนุธูู ูุง ููุฑู ูู ุงููุถุงุก ุจุงูุนูู ุงููุฌุฑุฏุฉ.",
    "ููุทูู ุนูู ูุฌููุนุฉ ูู ุงูุบุฑุจุงู ุงุณู 'ูุชู'.",
    "ููุฌุฏ ููุงู ูู ูุฑูุณุง ููุณุจุจ ูููุงู ุจุตุฑูุงู ูุฌุนูู ุชุจุฏู ูุฃูู ุชูุจุฑ ูุชุตุบุฑ ูุฃูุช ุชูุดู ูู ููุญุฏุฑ.",
    "ุฃูุจุฑ ุตุญุฑุงุก ูู ุงูุนุงูู ูู ุงููุงุฑุฉ ุงููุทุจูุฉ ุงูุฌููุจูุฉ (ุฃูุชุงุฑูุชููุง)ุ ูููุณุช ุงูุตุญุฑุงุก ุงููุจุฑู.",
    "ููุจ ุงูุญูุช ุงูุฃุฒุฑู ูุจูุฑ ูุฏุฑุฌุฉ ุฃู ุงูุฅูุณุงู ููููู ุงูุณุจุงุญุฉ ุฏุงุฎู ุดุฑุงูููู.",
    "ุฃุทูู ูููุฉ ูู ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ ุจุฏูู ุญุฑู ุนูุฉ ูู 'rhythms'.",
    "ูุฑุงุก ุงูุฏุจุจุฉ ุงููุทุจูุฉ ููุณ ุฃุจูุถุ ุฅูู ุดูุงู ูุนููุงู.",
    "ูุฑุณู ุงูููุฑุจุงุก ุงุฎุชุฑุนู ุทุจูุจ ุฃุณูุงู.",
    "ุนูู ุงููุนุงูุฉ ุฃูุจุฑ ูู ุฏูุงุบูุง.",
    "ุจุฑุงุฒ ุงูููุจุช ุนูู ุดูู ููุนุจุงุช."
  ];

  const randomQuote = randomQuotes[Math.floor(Math.random() * randomQuotes.length)];

  msg += `โโโโโโโพโ\nโ ยป ุฅุฌูุงูู ุงูุฃูุงูุฑ: [ ${commands.size} ]\nโใ โพโ ุงูุจุงุฏุฆุฉ: ${global.config.PREFIX} ใ\nโฐโโโโโโโโโโโง\n\nุญูููุฉ ุนุดูุงุฆูุฉ: ${randomQuote}\n\nุงููุงูู ุฃูุณ ุงูุณุฑูุฑู `;

  return api.shareContact(msg, api.getCurrentUserID(), event.threadID);
};
